(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{46601:function(){},51375:function(){},73105:function(){},65308:function(){},55024:function(){},51813:function(e,r,t){"use strict";t.d(r,{s:function(){return P}});var o=t(57437),n={src:"/_next/static/media/google.5a9d8035.svg",height:20,width:20,blurWidth:0,blurHeight:0},a={src:"/_next/static/media/keplr.dfc52cdd.svg",height:16,width:16,blurWidth:0,blurHeight:0},s={src:"/_next/static/media/leap.22e59eda.svg",height:16,width:16,blurWidth:0,blurHeight:0},l={src:"/_next/static/media/metamask.2496c24c.svg",height:16,width:16,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/trust-wallet.26194614.svg",height:16,width:16,blurWidth:0,blurHeight:0},c={src:"/_next/static/media/wallet-connect.e2450ab2.svg",height:20,width:19,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/Close.bfa79ebc.svg",height:16,width:16,blurWidth:0,blurHeight:0},d=t(62076),g=t(13304),f=t(66648),h=t(2265),m=t(69379),p=t(89733);let w=g.fC,v=g.xz,y=g.h_;g.x8;let b=h.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,o.jsx)(g.aV,{ref:r,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});b.displayName=g.aV.displayName;let k=h.forwardRef((e,r)=>{let{className:t,children:n,...a}=e;return(0,o.jsxs)(y,{children:[(0,o.jsx)(b,{}),(0,o.jsxs)(g.VY,{ref:r,className:(0,d.cn)('fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-c24 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-sm bg-cover bg-[url("assets/Modal-bg.png")]',t),...a,children:[n,(0,o.jsx)(g.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",asChild:!0,children:(0,o.jsxs)(p.z,{size:"icon",variant:"ghost",children:[(0,o.jsx)(f.default,{src:u,alt:"Close",height:16,width:16}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})})]})]})});k.displayName=g.VY.displayName;let x=e=>{let{className:r,...t}=e;return(0,o.jsx)("div",{className:(0,d.cn)("flex flex-col  text-center sm:text-left mb-c32",r),...t})};x.displayName="DialogHeader";let j=e=>{let{className:r,...t}=e;return(0,o.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};j.displayName="DialogFooter";let N=h.forwardRef((e,r)=>{let{className:t,children:n,...a}=e;return(0,o.jsx)(g.Dx,{ref:r,className:(0,d.cn)("font-500 tracking-tight text-display-4 mb-c8",t),...a,children:(0,o.jsx)(m.VM,{children:n})})});N.displayName=g.Dx.displayName;let M=h.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,o.jsx)(g.dk,{ref:r,className:(0,d.cn)("text-neutral-100 leading-h1 text-h2",t),...n})});M.displayName=g.dk.displayName;let C=h.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,o.jsx)(g.dk,{ref:r,className:(0,d.cn)("text-neutral-100 leading-h1 text-h2 pt-10 pb-1",t),...n})});C.displayName=g.dk.displayName;var S=t(87138);let _=e=>(0,o.jsx)("span",{className:"font-500 text-secondaryKey-225",children:(0,o.jsx)(S.default,{...e})});var T=t(9718),E=t(93191),A=t(16463),L=t(27776),D=t(7209),I=t(9109).Buffer,z=e=>{let{logo:r,text:t,alt:n,provider:a,inviteCode:s,variant:l="secondary",className:i="",size:c="default",isClickable:u=!0,isDisabledTimeout:g,setIsDisabledTimeout:m,closeDialog:w}=e,v=(0,A.useRouter)(),y=(0,E.NL)();"errorMessage"in window&&console.log(window.errorMessage);let b=e=>{g||(m(!0),setTimeout(()=>m(!1),5e3),e())},[k,x]=(0,h.useState)(!1);(0,h.useEffect)(()=>{k&&(v.push("/connection-progress"),x(!1))},[k,v]);let j=async()=>{m(!0);try{let e=await (0,T.h$)({provider:a,invite_code:null!=s?s:""});console&&console.log("loginCosmos successful"),y.setQueryData("login",e),x(!0),m(!1),y.invalidateQueries("user"),w()}catch(e){console&&console.log("loginCosmos error"),console&&console.error("Error in AuthenticateCosmos:",e),x(!0),m(!1)}},N=async()=>{m(!0);try{let e=await (0,T.Pm)({provider:a,invite_code:null!=s?s:""});console&&console.log("loginMetamask successful"),y.setQueryData("login",e),x(!0),y.invalidateQueries("user"),m(!1),w()}catch(e){console&&console.log("loginMetamask error"),console&&console.error("Error in AuthenticateMetaMask:",e),x(!0),m(!1)}},M=()=>{window.location.href="https://points-api.lavanet.xyz/accounts/google/login"},{selector:C,modal:S,accounts:_,accountId:z}=(0,D.P)();function P(){let e=_.find(e=>e.active);return e?e.publicKey:null}let Y=()=>{S.show(),P()&&U()},W=(0,h.useRef)(!1);(0,h.useEffect)(()=>{W.current||(W.current=!0,!localStorage.getItem("nearLocalStorageVarHasRun")&&(localStorage.setItem("nearLocalStorageVarHasRun","true"),(0,d.zP)()&&Y()))},[]);let U=async()=>{let e=function(e){console.log("loginNear error:",e),S.hide(),m(!1),w()},r=await C.wallet();if(!r){console.log("loginNear error: Wallet not found");return}let t=P();if(!t)return;console.log("loginNear progress (0): wallet:",r,"accountWallet:",t);let o=await (0,T.ty)("/accounts/near/login/",{account:z,process:"token",invite_code:null!=s?s:""});if(null==o?void 0:o.error){L.A.error("Server error with Near login, please disconnect wallet and try again"),console.log("loginNear error:",o.error);return}if(!o||!o.data||!o.success){L.A.error("Server error with Near login, please disconnect wallet and try again"),console.log("loginNear error: Token retrieval failed",o);return}localStorage.setItem("base_login_token",o.data),console.log("loginNear progress (1): tokenResponse.data",o.data);let n=o.data,a=I.from(n),l=D.G;localStorage.setItem("message",JSON.stringify({message:n,nonce:[...Array.from(n)],recipient:l,callbackUrl:(0,d.X5)()}));let i=null;try{i=await r.signMessage({message:n,nonce:a,recipient:l})}catch(r){console.log("loginNear signMessage error:",r),e(r);return}if(null==i||!i||!i.signature){console.log("loginNear signMessage error: empty signedMessage.",i),e("error: empty signedMessage.");return}console.log("loginNear progress (2): signedMessage.signature",i.signature);let c=await (0,T.ty)("/accounts/near/login/",{account:z,login_token:i.signature,public_key:i.publicKey,process:"verify",invite_code:null!=s?s:"",base_login_token:localStorage.getItem("base_login_token")||""});if(null==c?void 0:c.error){console.log("loginNear verify error:",c.error),e(c.error);return}window.location.href=(0,d.e0)()};return"near"===a?(0,o.jsx)("div",{className:"flex justify-between",children:(0,o.jsxs)(p.z,{variant:l,size:c,className:i||"glow-on-hover w-full justify-start",type:"submit",disabled:g||!1===u,onClick:()=>b(Y),children:[(0,o.jsx)("input",{type:"hidden",name:"provider",value:"near"}),(0,o.jsx)(f.default,{src:r,alt:n,className:"mr-c8"}),t]})}):"google"===a?(0,o.jsxs)(p.z,{variant:l,size:c,className:i||"glow-on-hover w-full justify-start",type:"submit",disabled:g||!1===u,onClick:()=>b(M),children:[(0,o.jsx)("input",{type:"hidden",name:"provider",value:"google"}),(0,o.jsx)(f.default,{src:r,alt:n,className:"mr-c8",style:{marginLeft:"-2px",marginRight:"6px"}}),t]}):"keplr"===a?(0,o.jsxs)(p.z,{variant:l,size:c,className:i||"glow-on-hover w-full justify-start",type:"submit",disabled:g||!1===u,onClick:()=>b(j),children:[(0,o.jsx)("input",{type:"hidden",name:"provider",value:"keplr"}),(0,o.jsx)(f.default,{src:r,alt:n,className:"mr-c8"}),t]}):"leap"===a?(0,o.jsxs)(p.z,{variant:l,size:c,className:i||"glow-on-hover w-full justify-start",type:"submit",disabled:g||!1===u,onClick:()=>b(j),children:[(0,o.jsx)("input",{type:"hidden",name:"provider",value:"leap"}),(0,o.jsx)(f.default,{src:r,alt:n,className:"mr-c8"}),t]}):(0,o.jsxs)(p.z,{variant:l,size:c,className:i||"glow-on-hover w-full justify-start",type:"submit",disabled:g||!1===u,onClick:()=>b(N),children:[(0,o.jsx)("input",{type:"hidden",name:"provider",value:"metamask"}),(0,o.jsx)(f.default,{src:r,alt:n,className:"mr-c8"}),t]})};let P=e=>{let{renderTrigger:r,inviteCode:t=null,startOpen:u=null}=e,[g,f]=(0,h.useState)(!1),[p,y]=(0,h.useState)(!!u&&u.current);(0,h.useEffect)(()=>{y(!!u&&u.current)},[u]);let b=()=>{y(!1)};return(0,o.jsxs)(w,{open:p,onOpenChange:y,children:[(0,o.jsx)(v,{asChild:!0,children:r()}),(0,o.jsxs)(k,{className:(0,d.cn)('sm:max-w-[425px] bg-[url("assets/Modal-bg.png")'),children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(N,{children:"Connect your wallet"}),(0,o.jsx)(M,{children:"Connect at least one of your wallets using Metamask, Trust ..."})]}),(0,o.jsxs)("div",{className:"mb-c24 flex flex-col gap-[1.6rem]",children:[(0,o.jsx)(z,{alt:"metamask",href:"/profile",logo:l,text:"Connect Metamask",provider:"metamask",inviteCode:t,isDisabledTimeout:g,setIsDisabledTimeout:f,closeDialog:b},"connect-your-wallet-link-metamask"),(0,o.jsx)(z,{alt:"Keplr connect",href:"/profile",logo:a,text:"Connect Keplr",provider:"keplr",inviteCode:t,isClickable:!0,isDisabledTimeout:g,setIsDisabledTimeout:f,closeDialog:b}),(0,o.jsx)(z,{alt:"Leap connect",href:"/profile",logo:s,text:"Connect Leap",provider:"leap",inviteCode:t,isClickable:!0,isDisabledTimeout:g,setIsDisabledTimeout:f,closeDialog:b}),(0,o.jsx)(z,{alt:"trust wallet",href:"/profile",logo:i,text:"Connect TrustWallet",provider:"trust-wallet",inviteCode:t,isClickable:!0,isDisabledTimeout:g,setIsDisabledTimeout:f,closeDialog:b},"connect-your-wallet-link-trust"),(0,o.jsx)(z,{alt:"wallet connect",href:"/profile",logo:c,text:"Connect WalletConnect (soon)",provider:"walletconnect",inviteCode:t,isClickable:!1,isDisabledTimeout:g,setIsDisabledTimeout:f,closeDialog:b},"connect-your-wallet-link-wallet-connect"),(0,o.jsx)(C,{children:"Donâ€™t see your favorite wallet?"}),(0,o.jsx)(z,{alt:"google",href:"/profile",logo:n,text:"Connect Google",provider:"google",inviteCode:t,isDisabledTimeout:g,setIsDisabledTimeout:f,closeDialog:b},"connect-your-wallet-link-wallet-google")]}),(0,o.jsxs)(m.P,{className:"text-[1.6rem] leading-[2.24rem]",children:["By using Lava Drops, you agree to our"," ",(0,o.jsx)(_,{href:"https://www.lavanet.xyz/terms-of-service",children:"Terms of service"})," and our"," ",(0,o.jsx)(_,{href:"https://www.lavanet.xyz/privacy-policy",children:"Privacy Policy"})]}),(0,o.jsx)(j,{})]})]})}},62151:function(e,r,t){"use strict";var o=t(57437);r.Z=()=>(0,o.jsxs)("div",{className:"lds-grid",children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})},7209:function(e,r,t){"use strict";t.d(r,{G:function(){return y},NearWalletSelectorContextProvider:function(){return k},P:function(){return x}});var o=t(57437),n=t(6562),a=t(50160),s=t(95725),l=t(59239),i=t(919),c=t(56987),u=t(42055),d=t(33818),g=t(1310),f=t(46595),h=t(2265),m=t(65690),p=t(39864),w=t(62151),v=t(62076);let y="lavanetxyz.near",b=h.createContext(null),k=e=>{let{children:r}=e,[t,k]=(0,h.useState)(null),[x,j]=(0,h.useState)(null),[N,M]=(0,h.useState)([]),[C,S]=(0,h.useState)(!0);(0,h.useEffect)(()=>{if("/"!==window.location.pathname&&""!==window.location.pathname&&"/connection-progress"!==window.location.pathname)return;let e=new URLSearchParams(window.location.hash.substring(1)),r=e.get("accountId"),t=e.get("signature"),o=e.get("publicKey");r&&t&&o&&(localStorage.setItem("near-data",JSON.stringify({accountId:r,signature:t,publicKey:o})),window.location.href=(0,v.X5)())},[]);let _=(0,h.useCallback)(async()=>{let e=(0,v.X5)(),r=await (0,n.L1)({network:"mainnet",debug:!0,modules:[(0,i.X)({successUrl:e,failureUrl:e}),(0,g.J)(),(0,d.t)(),(0,s.Z)(),(0,u.x)(),(0,f.b)(),(0,a.v)(),(0,c.X)()]}),t=(0,l.D)(r,{contractId:y});M(r.store.getState().accounts),window.selector=r,window.modal=t,k(r),j(t),S(!1)},[]);(0,h.useEffect)(()=>{_().catch(e=>{console.error("Near - Failed to initialise wallet selector",e),document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),localStorage.clear(),sessionStorage.clear(),location.reload()})},[_]),(0,h.useEffect)(()=>{if(!t)return;let e=t.store.observable.pipe((0,m.U)(e=>e.accounts),(0,p.x)()).subscribe(e=>{console.log("Accounts Update",e),M(e)}),r=x.on("onHide",e=>{let{hideReason:r}=e;console.log("The reason for hiding the modal ".concat(r))});return()=>{e.unsubscribe(),r.remove()}},[t,x]);let T=(0,h.useMemo)(()=>{var e;return{selector:t,modal:x,accounts:N,accountId:(null===(e=N.find(e=>e.active))||void 0===e?void 0:e.accountId)||null}},[t,x,N]);return C?(0,o.jsx)(w.Z,{}):(0,o.jsx)(b.Provider,{value:T,children:r})};function x(){let e=(0,h.useContext)(b);if(!e)throw Error("useNearWalletSelector must be used within a NearWalletSelectorContextProvider");return e}},62699:function(e,r,t){"use strict";t.d(r,{U:function(){return o}});let o={user:"user",invite:"invite",leaderboard:"leaderboard"}},9718:function(e,r,t){"use strict";t.d(r,{Pm:function(){return v},_y:function(){return b},h$:function(){return w},ty:function(){return d}});var o=t(62076),n=t(93191),a=t(25524),s=t(16463),l=t(27776);let i="cosmoshub-4";async function c(e,r){try{let t=await window.ethereum.request({method:"personal_sign",params:[e,r]});return console.log("Message signed successfully:",t),t}catch(e){return console.error("Error signing message with MetaMask:",e),{error:"MetaMask signing failed"}}}async function u(e,r,t){try{let o;if("keplr"===t){let{keplr:e}=window;if(!(o=e))throw Error("Keplr not installed")}else if("leap"===t){let{leap:e}=window;if(!(o=e))throw Error("Leap not installed")}else throw Error("Wallet not supported");let n=await o.signArbitrary(i,r,e);return console.log("Message signed successfully:",n),n}catch(e){return console.error("Error signing message:",e),{error:"Message signing failed"}}}async function d(e,r){try{let t=await fetch((0,o.Ai)(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include",mode:"cors"}),n=await t.json();if(n.error)return console.error("Error with POST request to ".concat(e,":"),n.error),{error:n.error};return n}catch(r){return console.error("Error with POST request to ".concat(e,":"),r),{error:"POST request failed"}}}async function g(e,r,t,o){try{let n=null;try{if(null==(n=await u(e,r,o))?void 0:n.error)return{error:n.error}}catch(e){return{error:"Signing failed"}}let a=await d("/accounts/"+o+"/login/",{account:r,public_key:n.pub_key.value,login_token:n.signature,process:"verify",invite_code:t,base_login_token:localStorage.getItem("base_login_token")||""});if(null==a?void 0:a.error){if(console.error("Login error:",null==a?void 0:a.error),"Your account has been banned"===a.error)return{error:"Your account has been banned"};return{error:"Login failed"}}return console.log("Login successful:",a),a}catch(e){return console.warn("Login with token failed:",e),{error:"Login with token failed"}}}async function f(e,r,t){try{let o=null;try{if(null==(o=await c(e,r))?void 0:o.error)return{error:o.error}}catch(e){return{error:"MetaMask signing failed"}}let n=await d("/accounts/metamask2/login/",{account:r,login_token:o,process:"verify",invite_code:t,base_login_token:localStorage.getItem("base_login_token")||""});if(null==n?void 0:n.error){if(console.error("Login error:",null==n?void 0:n.error),"Your account has been banned"===n.error)return{error:"Your account has been banned"};return{error:"Login failed"}}return console.log("Login successful with MetaMask:",n),n}catch(e){return console.warn("Login with token (MetaMask) failed:",e),{error:"Login with token (MetaMask) failed"}}}async function h(e){let r,t;if(void 0===window.ethereum)return console.error("MetaMask is not installed."),{error:"MetaMask not installed"};try{r=await window.ethereum.request({method:"eth_requestAccounts"})}catch(e){return console.error("Error requesting Ethereum accounts:",e),{error:"Error requesting Ethereum accounts"}}let o=r[0];console.log("Account obtained from MetaMask:",o);let n=await d("/accounts/metamask2/login/",{account:o,process:"token",invite_code:e});if(null==n?void 0:n.error)return(console.error("Login error:",null==n?void 0:n.error),"Your account has been banned"===n.error)?{error:"Your account has been banned"}:{error:"Login failed"};if(!n||!n.data||!n.success)return{error:"Token retrieval failed"};localStorage.setItem("base_login_token",n.data);try{if((t=await f(n.data,o,e)).error)return t}catch(e){return console.error("Error logging in with MetaMask:",e),{error:"Error logging in with MetaMask"}}return console.log("Logged in with MetaMask successfully"),{account:o,loginResponse:t}}async function m(e){let r,t,o,n;if("keplr"===e.provider){let{keplr:e}=window;if(!(r=e))return console.error("Keplr wallet extension is not installed."),{error:"Keplr not installed"}}else{if("leap"!==e.provider)return console.error("Non supported wallet"),{error:"Non supported wallet"};let{leap:t}=window;if(!(r=t))return console.error("Leap wallet extension is not installed."),{error:"Leap not installed"}}try{t=await r.getKey(i)}catch(e){return console.error("Error getting key:",e),{error:"Error getting key"}}let a=t.bech32Address;console.log("Account obtained:",a);try{if(null==(o=await d("/accounts/"+e.provider+"/login/",{account:a,process:"token",invite_code:e.invite_code}))?void 0:o.error){if(console.error("Login error:",null==o?void 0:o.error),"Your account has been banned"===o.error)return{error:"Your account has been banned"};return{error:"Login failed"}}}catch(e){return console.error("Error posting JSON:",e),{error:"Error posting JSON"}}if(!o||!o.data||!o.success)return console.error("Token retrieval failed"),{error:"Token retrieval failed"};localStorage.setItem("base_login_token",o.data),console.log("Got token response from BE",o);try{n=await g(o.data,a,e.invite_code,e.provider)}catch(e){return console.error("Error logging in:",e),{error:"Error logging in"}}return console.log("Logged in with"+e.provider+"successfully"),{account:a,loginResponse:n}}function p(e){try{switch(e){case"Your account has been banned":l.A.error("Your account has been closed for suspected bot use or spamming. To earn points, you must make a new account with a different wallet.");break;case"MetaMask not installed":l.A.error("Please install MetaMask and try again");break;case"Token retrieval failed":l.A.error("Token retrieval failed");break;case"CredentialsSignin":l.A.error("Invalid credentials");break;default:l.A.error("Something went wrong")}}catch(e){return console.error("Error handling error:",e),{error:"An unexpected error occurred while handling an error"}}}let w=async e=>{try{let r=await m({provider:e.provider,invite_code:e.invite_code});return console.log("getAccountCosmos response",r),r.error&&p(r.error),r}catch(e){if(e&&"object"==typeof e&&"message"in e)switch(console.error("Error:",e),p(e.message),e.message){case"Your account has been banned":l.A.error("Your account has been closed for suspected bot use or spamming. To earn points, you must make a new account with a different wallet.");break;case"MetaMask not installed":l.A.error("Please install MetaMask and try again");break;case"Token retrieval failed":l.A.error("Token retrieval failed");break;case"CredentialsSignin":l.A.error("Invalid credentials");break;default:l.A.error("Something went wrong")}return{error:e.message}}},v=async e=>{try{let r=await h(e.invite_code);return console.log("getAccountMetaMask response",r),r.error&&p(r.error),r}catch(e){if(e&&"object"==typeof e&&"message"in e)switch(console.error("Error:",e),p(e.message),e.message){case"Your account has been banned":l.A.error("Your account has been closed for suspected bot use or spamming. To earn points, you must make a new account with a different wallet.");break;case"MetaMask not installed":l.A.error("Please install MetaMask and try again");break;case"Token retrieval failed":l.A.error("Token retrieval failed");break;case"CredentialsSignin":l.A.error("Invalid credentials");break;default:l.A.error("Something went wrong")}return{error:e.message}}};async function y(){await fetch((0,o.kG)("/logout"),{credentials:"include",mode:"cors"})}let b=e=>{let r=(0,n.NL)(),t=(0,s.useRouter)(),l=(0,a.D)({mutationFn:y,...e,onSuccess:async function(){for(var n,a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];console.log("logout mutation triggererd"),r.invalidateQueries("user"),null==e||null===(n=e.onSuccess)||void 0===n||n.call(e,...s),await (0,o._v)(100),t.push("/"),window.location.reload()}});return{logoutMutation:l.mutateAsync,...l}}},92274:function(e,r,t){"use strict";t.d(r,{b:function(){return l},n:function(){return i}});var o=t(62699),n=t(87685),a=t(40932),s=t(2265);let l=e=>{let{isLoggedIn:r}=i(),{data:t,...s}=(0,a.a)({queryKey:[o.U.user],queryFn:n.C,...{enabled:r,staleTime:18e5,...e}});return{user:(null==t?void 0:t.detail)==="Unauthorized"?null:t,...s}},i=e=>{let[r,t]=(0,s.useState)(!1),{isFetched:l,...i}=(0,a.a)({queryKey:[o.U.user],queryFn:n.C,...e,retry:r,onError:function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];console.log("User is not logged in",r),t(!1)},onSuccess:()=>{console.log("User is logged in"),t(!0)}});return{isLoggedIn:r&&l,...i}}},87685:function(e,r,t){"use strict";t.d(r,{C:function(){return n},G:function(){return a}});var o=t(62076);let n=async()=>{let e=await fetch((0,o.kG)("/users/me"),{credentials:"include",mode:"cors"});if(401===e.status)throw Error("401");return e.json()},a=async e=>(await fetch((0,o.kG)("/users/me/nickname"),{method:"PUT",body:JSON.stringify({nickname:e}),credentials:"include",mode:"cors"})).json()}}]);